(this.webpackJsonpbackend=this.webpackJsonpbackend||[]).push([[0],{10:function(n,e,s){var o=s(171).createConnection({host:"35.223.243.139",user:"root",password:"6hqIAjcwnhDdsC3x",database:"tunify"});o.connect((function(n){if(n)throw n})),n.exports=o},180:function(n,e,s){var o=s(6),t=s(94),r=o(),a=s(356);r.use(a()),r.use(t.urlencoded({extended:!0})),r.use(o.json()),r.get("/api/ping",(function(n,e){e.send("pong")}));var i=s(357),c=s(402),u=s(403),l=s(404),d=s(405),E=s(406),g=s(407),m=s(408),_=s(409),I=s(410),p=s(411),f=s(412);r.use("/api/advanced",i),r.use("/api/users",c),r.use("/api/artists",u),r.use("/api/songs",l),r.use("/api/genres",d),r.use("/api/matchmaking",E),r.use("/api/song_genre",g),r.use("/api/artist_genre",m),r.use("/api/artist_song",_),r.use("/api/user_genre",I),r.use("/api/user_song",p),r.use("/api/user_artist",f),r.listen(3002,(function(){console.log("running on port 3002")}))},205:function(n,e){},206:function(n,e){},210:function(n,e){},212:function(n,e){},244:function(n,e){},247:function(n,e){function s(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}s.keys=function(){return[]},s.resolve=s,n.exports=s,s.id=247},255:function(n,e){},257:function(n,e){},285:function(n,e){},287:function(n,e){},288:function(n,e){},293:function(n,e){},295:function(n,e){},301:function(n,e){},303:function(n,e){},322:function(n,e){},334:function(n,e){},337:function(n,e){},357:function(n,e,s){var o=s(6).Router(),t=s(10);function r(n,e){t.query(n,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," results")),e.status(200).send(s))}))}o.get("/1/:limit",(function(n,e){console.log("GET /api/advanced/1/:limit invoked");var s=n.params.limit;r("\n    SELECT DISTINCT Song.name, User.first_name, User.last_name, User.dob\n    FROM Song JOIN User ON Song.date = User.dob\n    GROUP BY Song.name, User.first_name, User.last_name, User.dob\n    LIMIT ".concat(s,"\n  "),e)})),o.get("/2/:limit",(function(n,e){console.log("GET /api/advanced/2/:limit invoked");var s=n.params.limit;r("\n    SELECT x.track, x.year\n    FROM (\n      SELECT name AS track, date AS year\n      FROM Song\n      WHERE date >= 20000101 \n    ) x\n    GROUP BY x.track, x.year\n    ORDER BY x.year ASC\n    LIMIT ".concat(s,"\n  "),e)})),o.get("/3/:limit",(function(n,e){console.log("GET /api/advanced/3/:limit invoked");var s=n.params.limit;r("\n    SELECT x.artName, x.artPop\n    FROM (\n      SELECT Artist.name as artName, Artist.popularity as artPop\n      FROM Artist \n      WHERE Artist.popularity >= 50\n    ) x\n    GROUP BY x.artName, x.artPop\n    LIMIT ".concat(s,"\n  "),e)})),o.get("/4/:limit",(function(n,e){console.log("GET /api/advanced/4/:limit invoked");var s=n.params.limit;r("\n    SELECT DISTINCT User.first_name, User.last_name, pa.name\n    FROM User, (\n      SELECT * FROM Artist\n      where LENGTH(Artist.name) <= 10\n    ) pa\n    WHERE CONCAT(User.first_name, ' ') = LEFT(pa.name, LENGTH(User.first_name) + 1)\n    GROUP BY User.first_name, User.last_name, pa.name\n    LIMIT ".concat(s,"\n  "),e)})),n.exports=o},402:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/users/:limit invoked");var s=n.query.firstNameQuery,o=n.query.lastNameQuery,r=n.query.emailQuery,a="";void 0!==s&&(a+="WHERE first_name LIKE '%".concat(s,"%'")),void 0!==o&&(a+="".concat(Boolean(a)?"AND":"WHERE"," last_name LIKE '%").concat(o,"%'")),void 0!==r&&(a+="".concat(Boolean(a)?"AND":"WHERE"," email LIKE '").concat(r,"'"));var i=n.params.limit,c="\n\t\t  SELECT * \n\t\t  FROM User \n\t\t  ".concat(a,"\n\t\t  ORDER BY dob DESC\n\t\t  ").concat(Boolean(i)&&!isNaN(i)?"LIMIT ".concat(i):"","\n\t  ");console.log(c),t.query(c,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),o.put("/:userId",(function(n,e){console.log("PUT /api/users/:userId invoked"),console.log(n.body);var s=n.params.userId,o=n.body,r=o.first_name,a=o.last_name,i=o.email,c=o.dob;t.query("UPDATE `User` SET `first_name` = ?, `last_name` = ?, `email` = ?, `dob` = ? WHERE `user_id` = ? ",[r,a,i,c,s],(function(n,o){n?(console.error(n),e.status(500).send(n)):(console.log("User ".concat(s," successfully updated")),console.log(o),e.status(200).send(o))}))})),o.post("/",(function(n,e){console.log("POST /api/users/ invoked"),console.log(n.body);var s=n.body,o=s.first_name,r=s.last_name,a=s.email,i=s.dob;t.query("INSERT INTO `User` (`first_name`, `last_name`, `email`, `dob`) VALUES (?,?,?,?)",[o,r,a,i],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/:userId",(function(n,e){console.log("DELETE /api/users/:userId invoked");var s=n.params.userId;t.query("DELETE FROM `User` WHERE `user_id`= ?",s,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},403:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/artists/:limit invoked");var s=n.query.q,o=n.params.limit,r="\n        SELECT * \n        FROM Artist \n        ".concat(void 0===s?"":"WHERE name LIKE '%".concat(s,"%'"),"\n        ORDER BY popularity DESC\n        ").concat(Boolean(o)&&!isNaN(o)?"LIMIT ".concat(o):"","\n    ");t.query(r,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," artists")),e.status(200).send(s))}))})),o.post("/",(function(n,e){console.log("POST /api/artists/ invoked"),console.log(n.body);var s=n.body,o=s.name,r=s.popularity;t.query("INSERT INTO `Artist` (`name`, `popularity`) VALUES (?,?)",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.put("/:artistId",(function(n,e){console.log("PUT /api/artists/:artistId invoked"),console.log(n.body);var s=n.params.artistId,o=n.body,r=o.name,a=o.popularity;t.query("UPDATE `Artist` SET `name` = ?, `popularity` = ? WHERE `artist_id` = ? ",[r,a,s],(function(n,o){n?(console.error(n),e.status(500).send(n)):(console.log("Artist ".concat(s," successfully updated")),console.log(o),e.status(200).send(o))}))})),o.delete("/:artistId",(function(n,e){console.log("DELETE /api/artists/:artistId invoked");var s=n.params.artistId;t.query("DELETE FROM `Artist` WHERE `artist_id`= ?",s,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},404:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/songs/:limit invoked");var s=n.query.q,o=n.params.limit,r="\n        SELECT * \n        FROM Song \n        ".concat(void 0===s?"":"WHERE name LIKE '%".concat(s,"%'"),"\n        ORDER BY name DESC\n        ").concat(Boolean(o)&&!isNaN(o)?"LIMIT ".concat(o):"","\n    ");t.query(r,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," songs")),e.status(200).send(s))}))})),o.post("/",(function(n,e){console.log("POST /api/songs/ invoked: adding a new songs to table"),console.log(n.body);var s=n.body,o=s.name,r=s.duration,a=s.date;t.query("INSERT INTO `Song` (`name`, `duration`, `date`) VALUES (?, ?, ?)",[o,r,a],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.put("/:songId",(function(n,e){console.log("PUT /api/songs/:songId invoked"),console.log(n.body);var s=n.params.songId,o=n.body,r=o.name,a=o.duration,i=o.date;t.query("UPDATE `Song` SET `name` = ?, `duration` = ?, `date` = ? WHERE `song_id` = ? ",[r,a,i,s],(function(n,o){n?(console.error(n),e.status(500).send(n)):(console.log("Song ".concat(s," successfully updated")),console.log(o),e.status(200).send(o))}))})),o.delete("/:songId",(function(n,e){console.log("DELETE /api/songs/:songId invoked");var s=n.params.songId;t.query("DELETE FROM `Song` WHERE `song_id`= ?",s,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},405:function(n,e,s){var o=s(6).Router(),t=s(10);o.post("/",(function(n,e){console.log("POST /api/genres/ invoked: adding a new genre to table"),console.log(n.body);var s=n.body.name;t.query("INSERT INTO `Genre` (`name`) VALUES (?)",s,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/:genreId",(function(n,e){console.log("DELETE /api/genres/:genreId invoked");var s=n.params.genreId;t.query("DELETE FROM `Genre` WHERE `genre_id`= ?",s,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.put("/:genreId",(function(n,e){console.log("PUT /api/genres/:genreId invoked"),console.log(n.body);var s=n.params.genreId,o=n.body.name;t.query("UPDATE `Genre` SET `name` = ? WHERE `genre_id` = ? ",[o,s],(function(n,o){n?(console.error(n),e.status(500).send(n)):(console.log("Genre ".concat(s," successfully updated")),console.log(o),e.status(200).send(o))}))})),o.get("/:limit",(function(n,e){console.log("GET /api/genres/:limit invoked");var s=n.query.q;console.log("name of genre we want is ",s);var o=n.params.limit,r="\n        SELECT * \n        FROM Genre \n        ".concat(void 0===s?"":"WHERE name LIKE '%".concat(s,"%'"),"\n        ORDER BY Genre.name ASC\n        ").concat(Boolean(o)&&!isNaN(o)?"LIMIT ".concat(o):"","\n    ");t.query(r,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," genres")),e.status(200).send(s))}))})),n.exports=o},406:function(n,e,s){var o=s(6).Router(),t=s(10);function r(n,e){t.query(n,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," results")),e.status(200).send(s))}))}o.get("/UserSong/:limit/:userId",(function(n,e){console.log("GET /:UserSong:limit:userId invoked");var s=n.params.limit,o=n.params.userId;r("\n    SELECT COUNT(*) as num_similar_songs, User.user_id, User.first_name, User.last_name, User.email, User.dob\n    FROM (\n        SELECT UserSong.user_id, UserSong.song_id\n        FROM UserSong\n        WHERE UserSong.song_id IN (\n            SELECT UserSong.song_id\n            FROM UserSong\n            WHERE UserSong.user_id = ".concat(o,"\n        ) \n    ) u JOIN User ON User.user_id = u.user_id\n    GROUP BY u.user_id\n    HAVING u.user_id != ").concat(o,"\n    ORDER BY num_similar_songs DESC   \n    LIMIT ").concat(s,"  \n  "),e)})),o.get("/UserGenre/:limit/:userId",(function(n,e){console.log("GET /:UserGenre:limit:userId invoked");var s=n.params.limit,o=n.params.userId;r("\n        SELECT COUNT(*) as num_similar_genres, User.user_id, User.first_name, User.last_name, User.email, User.dob\n        FROM (\n            SELECT UserGenre.user_id, UserGenre.genre_id\n            FROM UserGenre\n            WHERE UserGenre.genre_id IN (\n                SELECT UserGenre.genre_id\n                FROM UserGenre\n                WHERE UserGenre.user_id = ".concat(o,"\n            ) \n        ) u JOIN User ON User.user_id = u.user_id\n        GROUP BY u.user_id\n        HAVING u.user_id != ").concat(o,"\n        ORDER BY num_similar_genres DESC\n        LIMIT ").concat(s,"\n    "),e)})),o.get("/UserArtist/:limit/:userId",(function(n,e){console.log("GET /:UserArtist:limit:userId invoked");var s=n.params.limit,o=n.params.userId;r("\n        SELECT COUNT(*) as num_similar_artists, User.user_id, User.first_name, User.last_name, User.email, User.dob\n        FROM (\n            -- selects all users that have liked artists that the given user 1 has liked\n            SELECT UserArtist.user_id, UserArtist.artist_id\n            FROM UserArtist\n            WHERE UserArtist.artist_id IN (\n                SELECT UserArtist.artist_id\n                FROM UserArtist\n                WHERE UserArtist.user_id = ".concat(o,"\n            ) \n        ) u JOIN User ON User.user_id = u.user_id\n        GROUP BY u.user_id\n        HAVING u.user_id != ").concat(o,"\n        ORDER BY num_similar_artists DESC\n        LIMIT ").concat(s,"\n    "),e)})),o.get("/shared/:limit/:userId1/:userId2",(function(n,e){console.log("GET /shared/:limit/:userId/:userId2 invoked");var s=n.params.userId1,o=n.params.userId2;r("\n        CALL trial(".concat(s,", ").concat(o,");\n    "),e)})),o.get("/user_user/:limit",(function(n,e){console.log("GET /api/user_artist/:limit invoked");var s=n.query.user1IdQuery,o=n.query.user2IdQuery,r="";void 0!==s&&(r+="WHERE user_1_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," user_2_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t  SELECT * \n\t\t  FROM UserUser \n\t\t  ".concat(r,"\n\t\t  ORDER BY user_user_id DESC\n\t\t  ").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t  ");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," results")),e.status(200).send(s))}))})),o.post("/user_user",(function(n,e){console.log("POST /api/user_user invoked"),console.log(n.body);var s=n.body,o=s.userId1,r=s.userId2;t.query("INSERT INTO `UserUser` (`user_1_id`, `user_2_id`) VALUES (?, ?)",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/user_user",(function(n,e){console.log("DELETE /api/user_user invoked");var s=n.body,o=s.userId1,r=s.userId2;t.query("DELETE FROM `UserUser` WHERE `user_id_1`= ? AND `user_id_2` = ?",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},407:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/song_genre/:limit invoked");var s=n.query.songIdQuery,o=n.query.genreIdQuery,r="";void 0!==s&&(r+="WHERE song_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," genre_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t\tSELECT * \n\t\t\tFROM SongGenre \n\t\t\t".concat(r,"\n\t\t\tORDER BY song_genre_id DESC\n\t\t\t").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t\t");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),n.exports=o},408:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/artist_genre/:limit invoked");var s=n.query.artistIdQuery,o=n.query.genreIdQuery,r="";void 0!==s&&(r+="WHERE artist_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," genre_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t\tSELECT * \n\t\t\tFROM ArtistGenre \n\t\t\t".concat(r,"\n\t\t\tORDER BY artist_genre_id DESC\n\t\t\t").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t\t");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),n.exports=o},409:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/artist_song/:limit invoked");var s=n.query.artistIdQuery,o=n.query.songIdQuery,r="";void 0!==s&&(r+="WHERE artist_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," song_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t\tSELECT * \n\t\t\tFROM ArtistSong \n\t\t\t".concat(r,"\n\t\t\tORDER BY artist_song_id DESC\n\t\t\t").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t\t");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),n.exports=o},410:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/user_genre/:limit invoked");var s=n.query.userIdQuery,o=n.query.genreIdQuery,r="";void 0!==s&&(r+="WHERE user_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," genre_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t  SELECT * \n\t\t  FROM UserGenre \n\t\t  ".concat(r,"\n\t\t  ORDER BY user_genre_id DESC\n\t\t  ").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t  ");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),o.post("/",(function(n,e){console.log("POST /api/user_genre/ invoked"),console.log(n.body);var s=n.body,o=s.user_id,r=s.genre_id;t.query("INSERT INTO `UserGenre` (`user_id`, `genre_id`) VALUES (?,?)",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/",(function(n,e){console.log("DELETE /api/user_genre/ invoked");var s=n.query.userIdQuery,o=n.query.genreIdQuery;if(void 0===s||void 0===o)return e.status(500).send();t.query("DELETE FROM `UserGenre` WHERE `user_id`= ? AND `genre_id`= ?",[s,o],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},411:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/user_song/:limit invoked");var s=n.query.userIdQuery,o=n.query.songIdQuery,r="";void 0!==s&&(r+="WHERE user_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," song_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t  SELECT * \n\t\t  FROM UserSong \n\t\t  ".concat(r,"\n\t\t  ORDER BY user_song_id DESC\n\t\t  ").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t  ");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),o.post("/",(function(n,e){console.log("POST /api/user_song/ invoked"),console.log(n.body);var s=n.body,o=s.user_id,r=s.song_id;t.query("INSERT INTO `UserSong` (`user_id`, `song_id`) VALUES (?,?)",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/",(function(n,e){console.log("DELETE /api/user_song/ invoked");var s=n.query.userIdQuery,o=n.query.songIdQuery;if(void 0===s||void 0===o)return e.status(500).send();t.query("DELETE FROM `UserSong` WHERE `user_id`= ? AND `song_id`= ?",[s,o],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o},412:function(n,e,s){var o=s(6).Router(),t=s(10);o.get("/:limit",(function(n,e){console.log("GET /api/user_artist/:limit invoked");var s=n.query.userIdQuery,o=n.query.artistIdQuery,r="";void 0!==s&&(r+="WHERE user_id LIKE '".concat(s,"'")),void 0!==o&&(r+="".concat(Boolean(r)?"AND":"WHERE"," artist_id LIKE '").concat(o,"'"));var a=n.params.limit,i="\n\t\t  SELECT * \n\t\t  FROM UserArtist \n\t\t  ".concat(r,"\n\t\t  ORDER BY user_artist_id DESC\n\t\t  ").concat(Boolean(a)&&!isNaN(a)?"LIMIT ".concat(a):"","\n\t  ");console.log(i),t.query(i,(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log("Success, sent ".concat(s.length," users")),e.status(200).send(s))}))})),o.post("/",(function(n,e){console.log("POST /api/user_artist/ invoked"),console.log(n.body);var s=n.body,o=s.user_id,r=s.artist_id;t.query("INSERT INTO `UserArtist` (`user_id`, `artist_id`) VALUES (?,?)",[o,r],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),o.delete("/",(function(n,e){console.log("DELETE /api/user_artist/ invoked");var s=n.query.userIdQuery,o=n.query.artistIdQuery;if(void 0===s||void 0===o)return e.status(500).send();t.query("DELETE FROM `UserArtist` WHERE `user_id`= ? AND `artist_id`= ?",[s,o],(function(n,s){n?(console.error(n),e.status(500).send(n)):(console.log(s),e.status(200).send(s))}))})),n.exports=o}},[[180,1,2]]]);
//# sourceMappingURL=main.6ca0584b.chunk.js.map